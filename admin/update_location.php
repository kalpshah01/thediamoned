<?php session_start(); if(!isset($_SESSION['admin_id'])) header('Location: login.php'); require_once __DIR__.'/../config/db.php'; $msg=''; if($_SERVER['REQUEST_METHOD']==='POST'){ $emp=intval($_POST['employee_id']??0); $lat=floatval($_POST['lat']??0); $lng=floatval($_POST['lng']??0); if($emp && $lat && $lng){ $ins=$conn->prepare('INSERT INTO employee_locations (employee_id,lat,lng) VALUES (?,?,?)'); $ins->bind_param('idd',$emp,$lat,$lng); if($ins->execute()) $msg='Location updated'; else $msg='DB error'; } else $msg='Provide values'; } $emps=$conn->query('SELECT id,name FROM employees')->fetch_all(MYSQLI_ASSOC); include_once __DIR__.'/../includes/header.php'; ?>
<div class="card p-3"><h3>Simulate Employee Location</h3><?php if($msg) echo '<div class="alert alert-info">'.htmlspecialchars($msg).'</div>'; ?>
<form method="post" class="row g-2"><div class="col-md-4"><label>Employee</label><select name="employee_id" class="form-control"><?php foreach($emps as $e) echo '<option value="'. $e['id'] .'">'.htmlspecialchars($e['name']).'</option>'; ?></select></div><div class="col-md-3"><label>Latitude</label><input class="form-control" name="lat" required></div><div class="col-md-3"><label>Longitude</label><input class="form-control" name="lng" required></div><div class="col-md-2"><label>&nbsp;</label><button class="btn btn-primary w-100">Update</button></div></form></div><?php include_once __DIR__.'/../includes/admin_footer.php'; ?>