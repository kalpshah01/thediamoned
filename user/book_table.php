<?php session_start(); require_once __DIR__.'/../config/db.php'; if(!isset($_SESSION['user_id'])) header('Location: login.php'); $msg=''; if($_SERVER['REQUEST_METHOD']==='POST'){ $date=$_POST['date']; $time=$_POST['time']; $guests=intval($_POST['guests']); $ins=$conn->prepare('INSERT INTO table_bookings (user_id,booking_date,booking_time,guests) VALUES (?,?,?,?)'); $ins->bind_param('issi', $_SESSION['user_id'],$date,$time,$guests); if($ins->execute()) $msg='Booking requested'; else $msg='Error'; } include_once __DIR__.'/../includes/header.php'; ?>
<div class="card p-3"><h3>Book a Table</h3><?php if($msg) echo '<div class="alert alert-info">'.htmlspecialchars($msg).'</div>'; ?><form method="post"><input class="form-control mb-2" type="date" name="date" required><input class="form-control mb-2" type="time" name="time" required><input class="form-control mb-2" type="number" name="guests" min="1" value="2" required><button class="btn btn-primary">Request Booking</button></form></div></div></div><?php include_once __DIR__.'/../includes/footer.php'; ?>